<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head th:replace="template :: head">
</head>
<body>

<nav th:replace="template :: navbar"></nav>
<div class="container-fluid">
    <div class="row">
    <div th:replace="template :: sidebar"></div>
    <div class="col-md-9">
        <form style="display: none;" id="newCategoryForm" th:action="@{/admin/seances/edit}" th:object="${newSeance}" enctype="multipart/form-data" method="post">
            <input  id="submitId" type="text" class="form-control" th:field="*{Id}" />
            <input id="submitDateProjection" type="date" class="form-control" th:field="*{dateProjection}" />
            <input id="submitHeureDebut" type="time" class="form-control" th:field="*{heureDebut}" />
            <input id="submitheureFin" type="time" class="form-control" th:field="*{heureFin}" />
            <input  id="submitFilm" type="text" class="form-control" th:field="*{film.id}" />
            <input  id="submitsalle" type="text" class="form-control" th:field="*{salle.id}" />
        </form>
    `
        <h2  class="text-light mt-5 mb-3">Seance</h2>
        <div class="table-responsive">
            <table class="table table-striped">
                <thead>
                <tr>
                    <th>ID</th>
                    <th>Date Projection</th>
                    <th>Heure Debut</th>
                    <th>Heure Fin</th>
                    <th>Film</th>
                    <th>Salle</th>
                </tr>
                </thead>
                <tbody>
                <tr th:each="seance : ${listSeances}">
    
                    <td th:text="${seance.id}"></td>
                    <td><input type="date" class="form-control"  th:value="${seance.dateProjection}" /></td>
                    <td><input type="time" class="form-control"   th:value="${seance.heureDebut}" /></td>
                    <td><input type="time" class="form-control"   th:value="${seance.heureFin}" /></td>
                    <td><select class="form-select">
                        <option th:each="film : ${films}" th:text="${film.titre}" th:selected="${film.id == seance.film.id}" th:value="${film.id}"></option>
                    </select>
                    </td>
                    <td><select class="form-select">
                        <option th:each="salle : ${salles}" th:text="${salle.numero}" th:selected="${salle.id == seance.salle.id}" th:value="${salle.numero}"></option>
                    </select>
                    </td>
                    <td>
                        <button  onclick="save(this)" type="button" id="saveButton" class="btn btn-primary btn-sm" ><i class="fas fa-save"></i> Save</button>
                        <a th:href="@{'/admin/seances/delete/' + ${seance.Id}}" class="btn btn-danger btn-sm"><i class="fas fa-trash"></i> Delete</a>
                    </td>
    
                </tr>
                <tr style="background-color: rgb(204, 203, 203);">
                    <td>#</td>
                    <td><input type="date" class="form-control" placeholder="date projection"/></td>
                    <td><input type="time" class="form-control"  placeholder="Heure Debut"/></td>
                    <td><input type="time" class="form-control" placeholder="Heure Fin"/></td>
                    </td>
                    <td><select class="form-select">
                        <option th:each="film : ${films}" th:text="${film.titre}"  th:value="${film.id}"></option>
                    </select>
                    </td>
                    <td><select class="form-select">
                        <option th:each="salle : ${salles}" th:text="${salle.numero}"  th:value="${salle.numero}"></option>
                    </select>
                    </td>
                    <td>
                        <button  onclick="add(this)" type="button"  style="width: 100px" class="btn btn-primary btn-sm" ><i class="fas fa-save"></i> Add</button>
                    </td>
                </tr>
                </tbody>
            </table>
            <div style="display: flex; flex-direction: row; justify-content: center" >
            <nav style="width: max-width;"  aria-label="Page navigation">
                <ul  th:if="${totalpages >0}" class="pagination">
                    <li class="page-item">
                        <a class="page-link" th:href="@{'/admin/seances/page/1'}" aria-label="Previous">
                            <span aria-hidden="true">&laquo;</span>
                        </a>
                    </li>
                    <li th:each="i : ${#numbers.sequence(1,totalpages)}" ><a class="page-link" th:href="@{'/admin/seances/page/'+${i}}" th:text="${i}"></a></li>
                    <li class="page-item">
                        <a class="page-link" th:href="@{'/admin/seances/page/' + ${totalpages}}" aria-label="Next">
                            <span aria-hidden="true">&raquo;</span>
                        </a>
                    </li>
                </ul>
            </nav>
            </div>
        </div>
        <script>
            function  save(btn){
                document.getElementById("submitId").value = btn.parentElement.parentElement.children[0].innerText
                document.getElementById("submitDateProjection").value = btn.parentElement.parentElement.children[1].firstChild.value
                document.getElementById("submitHeureDebut").value = btn.parentElement.parentElement.children[2].firstChild.value
                document.getElementById("submitheureFin").value = btn.parentElement.parentElement.children[3].firstChild.value
                document.getElementById("submitFilm").value = btn.parentElement.parentElement.children[4].firstChild.value
                document.getElementById("submitsalle").value = btn.parentElement.parentElement.children[5].firstChild.value
                document.getElementById("newCategoryForm").submit();
            }
            function  add(btn){
                // document.getElementById("submitId").value = btn.parentElement.parentElement.children[0].innerText
                document.getElementById("submitDateProjection").value = btn.parentElement.parentElement.children[1].firstChild.value
                document.getElementById("submitHeureDebut").value = btn.parentElement.parentElement.children[2].firstChild.value
                document.getElementById("submitheureFin").value = btn.parentElement.parentElement.children[3].firstChild.value
                document.getElementById("submitFilm").value = btn.parentElement.parentElement.children[4].firstChild.value
                document.getElementById("submitsalle").value = btn.parentElement.parentElement.children[5].firstChild.value
                document.getElementById("newCategoryForm").submit();
            }
            
    
        </script>
    

</div>
</div>

<div th:replace="template :: footer"></div>

</body>
</html>
